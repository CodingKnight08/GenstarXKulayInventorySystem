@using static GenstarXKulayInventorySystem.Shared.Helpers.ProductsEnumHelpers
@if(IsLoading){
    <MudDialog Class="p-2 overflow-hidden">
        <DialogContent>
            <MudItem xs="12" lg="12" Class="d-flex align-items-center justify-content-center">
                <MudProgressCircular Indeterminate="true" Color="Color.Info" Size="Size.Medium" />
            </MudItem>
            <MudItem xs="12" lg="12">
                @if (IsUpdating)
                {
                    <MudText Typo="Typo.subtitle1" Align="Align.Center" Class="text-black">Updating Data..</MudText>
                }
                else
                {
                    <MudText Typo="Typo.subtitle1" Class="text-black" Align="Align.Center">Loading Data..</MudText>
                }
            </MudItem>
           
        </DialogContent>
    </MudDialog>
}
else
{
    <MudDialog>
        <DialogContent>
            <MudGrid Spacing="2">
                <!-- Product Name -->
                <MudItem xl="12">
                    <MudTextField @bind-Value="UpdatedProduct.ProductName"
                                  Label="Product Name"
                                  Required="true"
                                  Margin="Margin.Dense"
                                  FullWidth="true"
                                  RequiredError="Product Name Required" />
                </MudItem>

                <!-- Description -->
                <MudItem xs="12" sm="12">
                    <MudTextField @bind-Value="UpdatedProduct.Description"
                                  Label="Description"
                                  Margin="Margin.Dense"
                                  Lines="3"
                                  FullWidth="true" />
                </MudItem>

                <!-- Size -->
                <MudItem xs="12" sm="6">
                    <MudTextField @bind-Value="UpdatedProduct.Size"
                                  Label="Size"
                                  Margin="Margin.Dense"
                                  FullWidth="true"
                                  Required=true
                                  RequiredError="Input Size" />
                </MudItem>
                <MudItem xs="12" sm="6" lg="6">
                    <MudSelect T="ProductMesurementOption?"
                               Label="Unit"
                               @bind-Value="UpdatedProduct.ProductMesurementOption"
                               Margin="Margin.Dense"
                               FullWidth="true"
                               Required=true
                               RequiredError="Select Unit Option">

                        <MudSelectItem T="ProductMesurementOption?" Value="null" Disabled="true">
                            -- Select Unit --
                        </MudSelectItem>

                        @foreach (var unit in Enum.GetValues(typeof(ProductMesurementOption)).Cast<ProductMesurementOption>())
                        {
                            <MudSelectItem T="ProductMesurementOption?" Value="@unit">
                                @unit.ToString()
                            </MudSelectItem>
                        }
                    </MudSelect>



                </MudItem>
                <!-- Category Dropdown -->
                <MudItem xs="12" sm="6">
                    <MudSelect T="int?"
                               Label="Category"
                               @bind-Value="UpdatedProduct.ProductCategoryId">
                        <MudSelectItem T="int?" Value="null">None</MudSelectItem>
                        @foreach (var category in Categories)
                        {
                            <MudSelectItem T="int?" Value="@category.Id">@category.Name</MudSelectItem>
                        }
                    </MudSelect>

                </MudItem>
                <MudItem xs="12" sm="6" lg="6">
                    <MudTextField @bind-Value="UpdatedProduct.Color"
                                  Label="Color"
                                  Margin="Margin.Dense"
                                  FullWidth="true" />
                </MudItem>
                <MudItem xs="12" lg="6" sm="6">
                    <MudNumericField @bind-Value="UpdatedProduct.Quantity"
                                     Label="Quantity"
                                     Margin="Margin.Dense"
                                     FullWidth="true" />
                </MudItem>
                <MudItem xs="12" sm="6" lg="6">
                    <MudNumericField T="decimal"
                                     @bind-Value="@UpdatedProduct.CostPrice"
                                     Label="Cost Price"
                                     Adornment="Adornment.Start"
                                     AdornmentText="₱"
                                     HideSpinButtons="true"
                                     Format="N2"
                                     Culture="@_en"
                                     Margin="Margin.Dense"
                                     FullWidth="true"
                                     RequiredError="Add Cost" />
                </MudItem>

                <MudItem xs="12" sm="6" lg="6">
                    <MudNumericField T="decimal?"
                                     @bind-Value="@UpdatedProduct.RetailPrice"
                                     Label="Retail Price"
                                     Adornment="Adornment.Start"
                                     AdornmentText="₱"
                                     HideSpinButtons="true"
                                     Format="N2"
                                     Culture="@_en"
                                     Margin="Margin.Dense"
                                     FullWidth="true" />
                </MudItem>

                <MudItem xs="12" sm="6" lg="6">
                    <MudNumericField T="decimal?"
                                     @bind-Value="@UpdatedProduct.WholesalePrice"
                                     Label="Wholesale Price"
                                     Adornment="Adornment.Start"
                                     AdornmentText="₱"
                                     HideSpinButtons="true"
                                     Format="N2"
                                     Culture="@_en"
                                     Margin="Margin.Dense"
                                     FullWidth="true" />
                </MudItem>

                <MudItem xs="12" lg="6">
                    <MudTextField @bind-Value="UpdatedProduct.Packaging" Label="Packaging" Margin=Margin.Dense Lines="1" Placeholder="e.g (1x12)" />
                </MudItem>
                <MudItem xs="12" sm="6" lg="6">
                    <MudSelect T="BranchOption" @bind-Value="UpdatedProduct.Branch" Label="Branch" ReadOnly=true>
                        @foreach (var branch in Enum.GetValues<BranchOption>())
                        {
                            <MudSelectItem Value="@branch">@branch</MudSelectItem>
                        }
                    </MudSelect>




                </MudItem>
            </MudGrid>
        </DialogContent>
        <DialogActions>
            <MudButton Variant="Variant.Filled" Color="Color.Default" OnClick="Cancel">Cancel</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Success" StartIcon="@Icons.Material.Filled.Save" OnClick="() => UpdateProductAsync()" Disabled=@IsDisabled>Update</MudButton>
        </DialogActions>
    </MudDialog>
}